---
- hosts: all
  pre_tasks:
    - name: install packages for testing under docker
      yum:
        name: "{{ item }}"
        state: present
      with_items:
        - selinux-policy
        - libselinux-python
        - openssh-server
        - which

  tasks:
    - name: allow only 'secure' ciphers
      lineinfile:
        path: /etc/ssh/sshd_config
        line: 'Ciphers aes128-ctr,aes192-ctr,aes256-ctr'
        regexp: '^Ciphers '
      notify: restart sshd
  handlers:
    - name: restart sshd
      service:
        name: sshd
        state: restarted

  roles:
    - role: apply_rhel7_cp_ccp_baseline

    - role: apply_rhel7_cis_baseline
      vars:
        rhel7cis_notauto: false
        rhel7cis_section1: true
        rhel7cis_section2: false
        rhel7cis_section3: false
        rhel7cis_section4: false
        rhel7cis_section5: false
        rhel7cis_section6: false
...